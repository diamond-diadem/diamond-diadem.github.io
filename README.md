
# DIAMOND Website

## Digital Platform of [PEPR DIADEM](https://pepr-diadem.fr)

## Built with [Hugo](https://gohugo.io), using the theme [Doks](https://getdoks.org), from the framework [Thulite](https://thulite.io)

## Local Installation (Development Server), for contributors

### Occasional Edits

You can edit the site directly on [the Github.com repository](https://github.com/diamond-diadem/diamond-diadem.github.io).

For more in-depth contributions, with the ability to test them before pushing, install the site locally.

### Prerequisites

- **Node.js** - `v20.11.0` or higher — run `node -v` to check.
- **Hugo extended** - `v0.140.0` — run `hugo version` to check.

### Installing Prerequisites: for Debian-based systems (Ubuntu, ...)

- #### Node.js

```bash
sudo apt update && sudo apt upgrade
sudo apt install -y curl software-properties-common
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt install -y nodejs
```

Then verify the installation:

```bash
node -v
npm -v
```

- #### Hugo extended

Ensure your system is up-to-date:

```bash
sudo apt update && sudo apt upgrade
```

- Go to the [Hugo releases page](https://github.com/gohugoio/hugo/releases) to check the different releases of `v0.140.0`.
- Directly download the `.deb` package corresponding to your system using `wget`. For example:

```bash
wget https://github.com/gohugoio/hugo/releases/download/v0.140.0/hugo_extended_0.140.0_linux-amd64.deb
```

Install the downloaded package:

```bash
sudo apt install ./hugo_extended_0.140.0_linux-amd64.deb
```

Verify the installation:

```bash
hugo version
```

### Retrieve and Install the Website Locally

#### Clone the Github Repository

```bash
git clone https://github.com/diamond-diadem/diamond-diadem.github.io.git diamond-website
```

#### Install Site Dependencies

```bash
cd diamond-website
npm install
```

### Access the Development Server

Run the command:

```bash
npm run dev
```

And you will have access to a local version of the site at `localhost:1313`.

This local version of the site will update with each modification of the source files, allowing you to test your contributions.

### For a guide to contributing to the site, consult `CONTRIBUTING.md` at the root of the source directory.

## Project Structure

```markdown
diamond-website/
├── .github/
│  └── workflows/
│     ├── deploy.yml
│     └── protect-files.yml
├── config/
│  └── ...
├── content/
│  ├── en/
|  |  └── ...
│  └── fr/
│     ├── about/
│     │  └── ...
│     ├── codes/
|     |  └── ...
│     ├── contact/
│     ├── data/
│     ├── documentation/
│     │  └── ...
│     ├── news/
│     └── workflows/
├── assets/
│  ├── images/
│  ├── js/
│  │  └── ...
│  ├── scss/
│  │  └── ...
│  ├── svgs/
│  │  └── ...
│  ├── cover.png
│  ├── favicon.png
│  └── ...
├── layouts/
│  └── ...
├── static/
│  ├── downloads/
|  |  └── ...
│  └── images/
|     └── ...
├── i18n/
├── archetypes/
├── public/
|  └── ...
├── node_modules/
|  └── ...
├── .gitignore
├── .gitpod.yml
├── .hugo_build.lock
├── .npmignore
├── .npmrc
├── .prettierignore
├── .prettierrc.yaml
├── CONTRIBUTING.md
├── LICENSE
├── README.EN.md
├── README.FR.md
├── hugo_stats.json
├── netlify.toml
├── package-lock.json
└── package.json
```

### `.github/workflows/` Directory

The `.github/workflows/` directory is used to configure GitHub Actions, a continuous integration and deployment (CI/CD) tool built into GitHub. This directory contains YAML (.yml) configuration files, which describe the workflows that GitHub should execute automatically for this project.

#### `deploy.yml`

Deploys the updated site online for every push to the `main` branch by a contributor.

#### `protect-files.yml`

Protects the `package.json` and `package-lock.json` files, rejecting any push that modifies them.

The `package.json` file is a main file that contains metadata about the project and a list of dependencies necessary for the project to function.

The `package-lock.json` file is automatically generated by `npm` when you install dependencies or modify the `package.json` file. It records the exact version of each dependency and their transitive dependencies (dependencies of dependencies).

### `config/` Directory

```markdown
config/
├── _default/
│  ├── menus/
│  │  ├── menus.en.yaml
│  │  └── menus.fr.yaml
│  ├── hugo.yaml
│  ├── languages.yaml
│  ├── markup.yaml
│  ├── module.yaml
│  └── params.yaml
├── next/
│  └── hugo.yaml
├── production/
│  └── hugo.yaml
├── babel.config.js
└── postcss.config.js
```

#### `.yaml` Files

Divided into three subdirectories, by working environment:

- `_default/` is the default environment, used during local development.
- `next/` contains variables modified from `_default` for "staging," which means deploying the site to an alternative address for sharing and testing ongoing development. Staging is not currently set up for this site.
- `production/` contains variables specific to the final production deployment, i.e., deploying the site to [`https://diamond-diadem.github.io`](https://diamond-diadem.github.io). For now, the only changes from `_default/` in `hugo.yaml` are:

```yaml
baseURL: https://diamond-diadem.github.io
canonifyURLs: true
```

vs.

```yaml
baseurl: http://localhost/
canonifyURLs: false
```

for `_default/`.

The rest of the configuration lines are distributed among the various `.yaml` files in `_default/`.

Certain lines are specific to the DIAMOND website project:

```yaml
diamond:
  enableNews: true
  sectionsIcons: false
  cookiesConsent: false
```

`enableNews` activates or deactivates the news system added to the site.

`sectionsIcons` enables or disables icons representing different sections on the homepage. This is currently an abandoned project, but you can activate this element and share your feedback!

`cookiesConsent` enables or disables the cookie consent system. It has not been deployed to date but is completed.

##### `module.yaml`

This file configures how certain folders from `nodes_modules` are loaded into specific project folders. This allows retrieval of files from the **Doks** and **Thulite** modules, in particular.

#### `babel.config.js`

This is a configuration file for Babel, a JavaScript tool primarily used to transform modern (or other) code into a version compatible with a broader range of browsers.

This file was created automatically and has not been edited since the site's creation.

#### `postcss.config.js`

This is a configuration file for PostCSS, a CSS processing tool. PostCSS allows transforming CSS code with plugins to add features, optimize code, or ensure compatibility with different browsers.

This file was also created automatically and has not been edited since the site's creation.

... (Remaining translation is similar and will follow the original document's sections.)


### `content/` Directory

The `content/` directory contains Markdown (`.md`) files, which are the source files for each page of the site (except for the homepage, which is generated by `layouts/index.html`).

To add content, this is the directory to work with. It is then possible to enrich the content with `.scss` style sheets, modifying `layouts` in `html`, and scripts in `.js`.

Note that the following configuration line in `markup.yaml`:

```yaml
goldmark:
  renderer:
    unsafe: true
```

allows HTML code to be integrated into Markdown files. This is widely used in the case of this website. However, it is entirely possible to stick to the Markdown syntax.

#### Structure

```markdown
content
├── en
│  ├── about
│  │  ├── apptainer
│  │  │  └── _index.md
│  │  ├── containers
│  │  │  └── _index.md
│  │  ├── diadem
│  │  │  └── _index.md
│  │  ├── diamond
│  │  │  └── _index.md
│  │  ├── guix
│  │  │  └── _index.md
│  │  └── _index.md
│  ├── codes
│  │  ├── scientific-computing
│  │  │  ├── _index.md
│  │  │  ├── abinit.md
│  │  │  ├── cp2k.md
│  │  │  ├── dftbplus.md
│  │  │  ├── fenics.md
│  │  │  ├── freefem.md
│  │  │  ├── gmsh.md
│  │  │  ├── lammps.md
│  │  │  ├── n2p2.md
│  │  │  ├── neper.md
│  │  │  ├── nwchem.md
│  │  │  ├── opencalphad.md
│  │  │  ├── opendis.md
│  │  │  ├── plumed.md
│  │  │  ├── quantum-espresso.md
│  │  │  ├── raspa2.md
│  │  │  ├── wannier90.md
│  │  │  ├── z-set.md
│  │  │  └── zeo++.md
│  │  ├── start-here
│  │  │  ├── home
│  │  │  │  ├── index.md
│  │  │  │  ├── part-1.md
│  │  │  │  ├── part-2.md
│  │  │  │  └── part-3.md
│  │  │  └── _index.md
│  │  ├── visualisation
│  │  │  ├── _index.md
│  │  │  ├── ovito.md
│  │  │  ├── paraview.md
│  │  │  ├── vesta.md
│  │  │  ├── vmd.md
│  │  │  └── xcrysden.md
│  │  └── _index.md
│  ├── contact
│  │  └── _index.md
│  ├── data
│  │  └── _index.md
│  ├── documentation
│  │  ├── by-container
│  │  │  ├── _index.md
│  │  │  ├── aiida.md
│  │  │  ├── lammps.md
│  │  │  ├── ovito.md
│  │  │  ├── paraview.md
│  │  │  ├── quantum-espresso.md
│  │  │  └── vmd.md
│  │  ├── freq_asked_questions
│  │  │  ├── _index.md
│  │  │  ├── apptainer-headnode.md
│  │  │  └── apptainer-visu.md
│  │  ├── install
│  │  │  ├── _index.md
│  │  │  ├── apptainer-windows.md
│  │  │  ├── install-apptainer.md
│  │  │  └── install-guix.md
│  │  ├── start-here
│  │  │  ├── _index.md
│  │  │  └── home.md
│  │  ├── use
│  │  │  ├── _index.md
│  │  │  ├── apptainer-image.md
│  │  │  ├── apptainer-isolation-flags.md
│  │  │  ├── apptainer-parallel.md
│  │  │  ├── ask-help.md
│  │  │  ├── container-num-cost.md
│  │  │  └── guix-package.md
│  │  └── _index.md
│  ├── news
│  │  ├── ag-diadem-2024
│  │  │  ├── feature.jpg
│  │  │  └── index.md
│  │  ├── diadem-ia-numpex
│  │  │  ├── feature.png
│  │  │  └── index.md
│  │  ├── _index.md
│  │  └── cecam-workshop.md
│  ├── workflows
│  │  ├── saw
│  │  │  ├── _index.md
│  │  │  ├── description.md
│  │  │  └── tutorial.md
│  │  ├── start-here
│  │  │  ├── _index.md
│  │  │  └── home.md
│  │  └── _index.md
│  └── _index.md
└── fr
   └── ...
```

This structure shows how the content of the site is organized, by sections, divided into two mirror versions: one for French content (`content/fr`) and the other for the same content in English.

... (continue with specific sections and folder details following the same format).