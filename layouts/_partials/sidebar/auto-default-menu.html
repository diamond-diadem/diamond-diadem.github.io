<!-- Auto default section menu -->
{{ $currentPage := . -}}
{{ $section := $currentPage.Section -}}
{{ $currentDir := "" -}}
{{ $currentPath := "" -}}
{{ with $currentPage.File -}}
  {{ $currentDir = .Dir -}}
  {{ $currentPath = .Path -}}
{{ end -}}
{{ range (where .Site.Sections "Section" "in" $section) }}
  {{ range .Sections }}
    {{ $active := partial "sidebar/is-active" (dict "currentDir" $currentDir "currentPath" $currentPath "candidate" .) }}
    <h3 class="h6 text-uppercase mb-2">{{ .Title }}</h3>
    <ul class="list-unstyled">
      {{ range .Pages }}
        {{ if .IsNode }}
          {{ $active := partial "sidebar/is-active" (dict "currentDir" $currentDir "currentPath" $currentPath "candidate" .) }}
          <h4 class="h6 text-uppercase ms-3 mt-3 mb-2">{{ .Title }}</h4>
          <ul class="list-unstyled ms-3">
            {{ range .Pages }}
              {{ if .IsNode }}
                {{ $active := partial "sidebar/is-active" (dict "currentDir" $currentDir "currentPath" $currentPath "candidate" .) }}
                <h5 class="h6 text-uppercase mt-2 mb-2">{{ .Title }}</h5>
                <ul class="list-unstyled ms-3">
                  {{ range .Pages }}
                    {{ $active := partial "sidebar/is-active" (dict "currentDir" $currentDir "currentPath" $currentPath "candidate" . "exact" true) }}
                    <li><a class="docs-link{{ if $active }} active{{ end }}" href="{{ .Permalink }}">{{ .Name }}</a></li>
                  {{ end }}
                </ul>
              {{ else }}
                {{ $active := partial "sidebar/is-active" (dict "currentDir" $currentDir "currentPath" $currentPath "candidate" . "exact" true) }}
                <li><a class="docs-link{{ if $active }} active{{ end }}" href="{{ .Permalink }}">{{ .Name }}</a></li>
              {{ end }}
            {{ end }}
          </ul>
        {{ else }}
          {{ $active := partial "sidebar/is-active" (dict "currentDir" $currentDir "currentPath" $currentPath "candidate" . "exact" true) }}
          <li><a class="docs-link{{ if $active }} active{{ end }}" href="{{ .Permalink }}">{{ .Name }}</a></li>
        {{ end }}
      {{ end }}
    </ul>
  {{ end }}
  {{ range .RegularPages -}}
    {{ $active := partial "sidebar/is-active" (dict "currentDir" $currentDir "currentPath" $currentPath "candidate" . "exact" true) -}}
    <ul class="list-unstyled">
      <li><a class="docs-link{{ if $active }} active{{ end }}" href="{{ .Permalink }}">{{ .Name }}</a></li>
    </ul>
  {{- end }}
{{ end }}
